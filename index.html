<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±èªå­¸ç¿’å¹³å° - B1â†’B2é€²éš</title>
    <style>
        :root {
            --primary: #F5C197;
            --primary-hover: #E8B382;
            --success: #F0B8A8;
            --warning: #FDD9BE;
            --danger: #E8A88E;
            --bg: #FFFEF8;
            --surface: #F5E8D9;
            --text: #5C4A42;
            --text-light: #9A8B81;
            --border: #E0CDB9;
            --accent-light: #FFFEF8;
            --accent-warm: #F5E8D9;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, var(--primary), #E8B382);
            color: #5C4A42;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }

        .section {
            background: var(--surface);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.8);
            border: 1px solid var(--border);
        }

        .section h2 {
            font-size: 20px;
            margin-bottom: 16px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border);
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .tab {
            padding: 12px 16px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .schedule-day {
            background: #FFFEF8;
            border-left: 5px solid var(--primary);
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 6px;
            border-top: 1px solid var(--border);
            border-right: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }

        .schedule-day h4 {
            color: var(--primary);
            margin-bottom: 6px;
        }

        .schedule-day p {
            font-size: 14px;
            color: var(--text-light);
            margin: 4px 0;
        }

        .study-blocks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .block {
            background: linear-gradient(135deg, #F5C197 0%, #E8B382 100%);
            color: #5C4A42;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .block.input {
            background: linear-gradient(135deg, #F5C197 0%, #E8B382 100%);
        }

        .block.output {
            background: linear-gradient(135deg, #EDB89F 0%, #E3A88B 100%);
        }

        .block.integration {
            background: linear-gradient(135deg, #FDD9BE 0%, #F5C9B0 100%);
        }

        .block h3 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .block-time {
            font-size: 28px;
            font-weight: bold;
            margin: 12px 0;
        }

        .block-desc {
            font-size: 13px;
            opacity: 0.95;
        }

        .writing-exercise {
            background: #FFFEF8;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
        }

        .writing-exercise h4 {
            color: var(--primary);
            margin-bottom: 8px;
        }

        .writing-exercise .example {
            background: white;
            padding: 10px;
            border-left: 3px solid var(--warning);
            margin: 8px 0;
            font-size: 13px;
            border-radius: 4px;
        }

        .writing-exercise .tips {
            background: #FFFEF8;
            padding: 10px;
            border-radius: 4px;
            font-size: 13px;
            color: #9A8B81;
            margin-top: 8px;
            border-left: 3px solid var(--primary);
        }

        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            min-height: 100px;
            margin-bottom: 10px;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .btn {
            background: var(--primary);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: var(--primary-hover);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #388E3C;
        }

        .feedback {
            margin-top: 12px;
            padding: 12px;
            border-radius: 6px;
            font-size: 13px;
        }

        .feedback.error {
            background: #FFE8DC;
            color: #E8A88E;
            border-left: 4px solid #E8A88E;
        }

        .feedback.success {
            background: #FFFAEB;
            color: #F0B8A8;
            border-left: 4px solid #F0B8A8;
        }

        .feedback.info {
            background: #FFF5E6;
            color: #9A8B81;
            border-left: 4px solid #9A8B81;
        }

        .progress-section {
            margin-top: 20px;
        }

        .progress-item {
            margin-bottom: 12px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 14px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .vocabulary-card {
            background: #FFFEF8;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 5px solid var(--primary);
            border-top: 1px solid var(--border);
            border-right: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }

        .vocabulary-card .word {
            font-weight: bold;
            color: var(--primary);
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .play-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease, transform 0.2s ease;
            flex-shrink: 0;
        }

        .play-btn:hover {
            background: var(--primary-hover);
            transform: scale(1.1);
        }

        .play-btn:active {
            transform: scale(0.95);
        }

        .play-btn.playing {
            background: var(--success);
            animation: pulse 0.6s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .vocabulary-card .pronunciation {
            font-style: italic;
            color: var(--text-light);
            font-size: 13px;
        }

        .vocabulary-card .meaning {
            margin-top: 6px;
            color: var(--text);
        }

        .vocabulary-card .example {
            margin-top: 6px;
            color: var(--text-light);
            font-size: 13px;
            border-left: 2px solid var(--warning);
            padding-left: 8px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #F5C197 0%, #E8B382 100%);
            color: #5C4A42;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 13px;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 22px;
            }

            .study-blocks {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¯ è‹±èªå­¸ç¿’å¹³å°</h1>
        <p>B1â†’B2 é€²éšèª²ç¨‹ | æ¯æ—¥15åˆ†é˜é›†ä¸­å­¸ç¿’</p>
    </div>

    <div class="container">
        <!-- çµ±è¨ˆé¢æ¿ -->
        <div class="section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="dayCount">0</div>
                    <div class="stat-label">å­¸ç¿’å¤©æ•¸</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #EDB89F 0%, #E3A88B 100%);">
                    <div class="stat-number" id="wordCount">0</div>
                    <div class="stat-label">æ–°å–®å­—</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #FDD9BE 0%, #F5C9B0 100%);">
                    <div class="stat-number" id="writingCount">0</div>
                    <div class="stat-label">å¯«ä½œç¯‡æ•¸</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #F0B8A8 0%, #E8A88E 100%);">
                    <div class="stat-number" id="streak">0</div>
                    <div class="stat-label">é€£çºŒå¤©æ•¸</div>
                </div>
            </div>
        </div>

        <!-- 5-5-5 å­¸ç¿’æ–¹æ³• -->
        <div class="section">
            <h2>â±ï¸ æ¯æ—¥5-5-5å­¸ç¿’æ–¹æ³•</h2>
            <div class="study-blocks">
                <div class="block input">
                    <h3>ğŸ“» Block 1: è½åŠ›è¼¸å…¥</h3>
                    <div class="block-time">5 åˆ†é˜</div>
                    <div class="block-desc">
                        æ’­æ”¾è‹±æ–‡å°è©±ã€TEDæ¼”è¬›æˆ–æ–°èç‰‡æ®µ
                        <br><small>æå‡è½åŠ›ç†è§£èƒ½åŠ›</small>
                    </div>
                </div>
                <div class="block output">
                    <h3>ğŸ¤ Block 2: å£èªªè¼¸å‡º</h3>
                    <div class="block-time">5 åˆ†é˜</div>
                    <div class="block-desc">
                        è·Ÿè®€ã€è‡ªç”±æ¼”è¬›æˆ–å°è©±ç·´ç¿’
                        <br><small>åŸ¹é¤Šå£èªªæµæš¢åº¦</small>
                    </div>
                </div>
                <div class="block integration">
                    <h3>âœï¸ Block 3: å¯«ä½œæ•´åˆ</h3>
                    <div class="block-time">5 åˆ†é˜</div>
                    <div class="block-desc">
                        å¾®å¯«ä½œç·´ç¿’ã€å¥å­çµ„ç¹”
                        <br><small>å¼·åŒ–å¯«ä½œè¡¨é”èƒ½åŠ›</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ¯é€±å­¸ç¿’è¨ˆåŠƒ -->
        <div class="section">
            <h2>ğŸ“… æ¯é€±å­¸ç¿’ä¸»é¡Œè¨ˆåŠƒ</h2>
            <div id="scheduleContent"></div>
        </div>

        <!-- å¯«ä½œç·´ç¿’æ ¸å¿ƒ -->
        <div class="section">
            <h2>âœï¸ å¯«ä½œç·´ç¿’å·¥ä½œå€</h2>
            
            <div class="tabs">
                <button class="tab active" onclick="switchWritingTab(0)">ç´šåˆ¥1ï¼šå¥å­çµ„åˆ</button>
                <button class="tab" onclick="switchWritingTab(1)">ç´šåˆ¥2ï¼šæ®µè½å¯«ä½œ</button>
                <button class="tab" onclick="switchWritingTab(2)">ç´šåˆ¥3ï¼šçŸ­æ–‡å‰µä½œ</button>
            </div>

            <!-- ç´šåˆ¥1 -->
            <div class="tab-content active">
                <div class="writing-exercise">
                    <h4>ğŸ“ å¥å­çµ„åˆç·´ç¿’</h4>
                    <p style="color: var(--text-light); font-size: 14px; margin-bottom: 10px;">å°‡å…©å€‹ç°¡å–®å¥å­ç”¨é€£æ¥è©çµ„åˆæˆè¤‡é›œå¥</p>
                    
                    <div id="exercise1" style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                        <p><strong>é¡Œç›®ï¼š</strong> <span id="ex1Question"></span></p>
                        <p style="margin-top: 10px;"><strong>æç¤ºï¼š</strong> <span id="ex1Hint" style="color: var(--primary);"></span></p>
                    </div>

                    <textarea id="answer1" placeholder="åœ¨æ­¤è¼¸å…¥ä½ çš„ç­”æ¡ˆ..."></textarea>
                    
                    <button class="btn" onclick="checkLevel1()">æäº¤æª¢æŸ¥</button>
                    <div id="feedback1"></div>

                    <div class="tips">
                        ğŸ’¡ æç¤ºï¼šä½¿ç”¨ because, although, when, if, unless ç­‰é€£æ¥è©
                    </div>
                </div>
            </div>

            <!-- ç´šåˆ¥2 -->
            <div class="tab-content">
                <div class="writing-exercise">
                    <h4>ğŸ“ æ®µè½å¯«ä½œç·´ç¿’</h4>
                    <p style="color: var(--text-light); font-size: 14px; margin-bottom: 10px;">æ ¹æ“šé—œéµè©å¯«å‡ºä¸€å€‹3-5å¥çš„æ®µè½</p>
                    
                    <div id="exercise2" style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                        <p><strong>ä¸»é¡Œï¼š</strong> <span id="ex2Topic"></span></p>
                        <p style="margin-top: 10px;"><strong>é—œéµè©ï¼š</strong> <span id="ex2Keywords" style="color: var(--primary);"></span></p>
                    </div>

                    <textarea id="answer2" placeholder="åœ¨æ­¤è¼¸å…¥ä½ çš„ç­”æ¡ˆ..."></textarea>
                    
                    <button class="btn" onclick="checkLevel2()">æäº¤æª¢æŸ¥</button>
                    <div id="feedback2"></div>

                    <div class="tips">
                        ğŸ’¡ æç¤ºï¼šæ¯å€‹æ®µè½æ‡‰è©²æœ‰ä¸»é¡Œå¥å’Œæ”¯æŒå¥ã€‚ç¢ºä¿ä½¿ç”¨å¤šæ¨£çš„å¥å­çµæ§‹ã€‚
                    </div>
                </div>
            </div>

            <!-- ç´šåˆ¥3 -->
            <div class="tab-content">
                <div class="writing-exercise">
                    <h4>ğŸ“ çŸ­æ–‡å‰µä½œç·´ç¿’</h4>
                    <p style="color: var(--text-light); font-size: 14px; margin-bottom: 10px;">æ ¹æ“šä¸»é¡Œå¯«å‡ºä¸€ç¯‡150-200å­—çš„çŸ­æ–‡</p>
                    
                    <div id="exercise3" style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                        <p><strong>å¯«ä½œä¸»é¡Œï¼š</strong> <span id="ex3Topic"></span></p>
                    </div>

                    <textarea id="answer3" placeholder="åœ¨æ­¤è¼¸å…¥ä½ çš„ç­”æ¡ˆ..."></textarea>
                    <div style="font-size: 13px; color: var(--text-light); margin-bottom: 10px;">å­—æ•¸ï¼š<span id="wordCounter">0</span>/150-200</div>
                    
                    <button class="btn" onclick="checkLevel3()">æäº¤æª¢æŸ¥</button>
                    <div id="feedback3"></div>

                    <div class="tips">
                        ğŸ’¡ æç¤ºï¼šåŒ…å«å¼•å…¥ã€ä¸»é«”å’Œçµè«–ã€‚ä½¿ç”¨éæ¸¡è©(however, furthermore, in conclusion)å¢åŠ æ–‡ç« é€£è²«æ€§ã€‚
                    </div>
                </div>
            </div>
        </div>

        <!-- è©å½™å­¸ç¿’ -->
        <div class="section">
            <h2>ğŸ“š B2 é€²éšè©å½™å­¸ç¿’</h2>
            <div id="vocabularyList"></div>
        </div>

        <!-- é€²åº¦è¿½è¹¤ -->
        <div class="section">
            <h2>ğŸ“Š å­¸ç¿’é€²åº¦</h2>
            <div class="progress-section">
                <div class="progress-item">
                    <div class="progress-label">
                        <span>è½åŠ›ç†è§£ (Listening)</span>
                        <span id="listeningPct">65%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 65%; background: #2196F3;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>å£èªªæµæš¢ (Speaking)</span>
                        <span id="speakingPct">60%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%; background: #4CAF50;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>é–±è®€ç†è§£ (Reading)</span>
                        <span id="readingPct">70%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 70%; background: #FF9800;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-label">
                        <span>å¯«ä½œèƒ½åŠ› (Writing)</span>
                        <span id="writingPct">55%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 55%; background: #F44336;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å­¸ç¿’æ•¸æ“š
        const scheduleData = [
            { day: 'ğŸŒ™ æ˜ŸæœŸä¸€', theme: 'å•†å‹™è‹±æ–‡', focus: 'Emailå¯«ä½œã€æœƒè­°ç”¨èª', keywords: 'proposal, agenda, deadline' },
            { day: 'ğŸŒ™ æ˜ŸæœŸäºŒ', theme: 'æ—¥å¸¸ç”Ÿæ´»', focus: 'æ—¥å¸¸å°è©±ã€è³¼ç‰©ã€é¤å»³', keywords: 'I\'d like, could you, absolutely' },
            { day: 'ğŸ“– æ˜ŸæœŸä¸‰', theme: 'é–±è®€æ—¥', focus: 'æ–°èæ–‡ç« ã€éƒ¨è½æ ¼', keywords: 'è¤‡é›œå¥å­ã€é•·ç¯‡æ–‡ç« ' },
            { day: 'âœï¸ æ˜ŸæœŸå››', theme: 'å¯«ä½œæ—¥', focus: 'çŸ­æ–‡ã€æ®µè½ã€è«–æ–‡', keywords: 'æ®µè½çµæ§‹ã€éŠœæ¥è©' },
            { day: 'ğŸ¤ æ˜ŸæœŸäº”', theme: 'å£èªªç·´ç¿’', focus: 'æ¼”è¬›ã€è¨è«–ã€è¾¯è«–', keywords: 'argue, emphasize, persuade' },
            { day: 'ğŸ¯ æ˜ŸæœŸå…­', theme: 'ç¶œåˆè¤‡ç¿’', focus: 'æ··åˆæŠ€èƒ½ç·´ç¿’', keywords: 'è¤‡ç¿’æ‰€æœ‰æŠ€èƒ½' },
            { day: 'ğŸ“Š æ˜ŸæœŸæ—¥', theme: 'è©•ä¼°æ¸¬è©¦', focus: 'é€±æ¸¬é©—ã€é€²åº¦è©•ä¼°', keywords: 'é€²åº¦æª¢æ¸¬' }
        ];

        const vocabularyData = [
            { word: 'proficiency', pronunciation: '/prÉ™ËˆfÉªÊƒÉ™nsi/', meaning: 'ç†Ÿç·´åº¦ã€ç²¾é€š', example: 'Language proficiency is essential for international business.' },
            { word: 'coherent', pronunciation: '/koÊŠËˆhÉªrÉ™nt/', meaning: 'é€£è²«çš„ã€æ¸…æ™°çš„', example: 'Your essay should have a coherent structure.' },
            { word: 'elaborate', pronunciation: '/ÉªËˆlÃ¦bÉ™rÉ™t/', meaning: 'è©³ç´°èªªæ˜ã€è©³ç´°çš„', example: 'Can you elaborate on your previous point?' },
            { word: 'concise', pronunciation: '/kÉ™nËˆsaÉªs/', meaning: 'ç°¡æ˜çš„ã€ç°¡æ½”çš„', example: 'Write a concise summary of the article.' },
            { word: 'nuance', pronunciation: '/ËˆnuËÉ‘Ëns/', meaning: 'ç´°å¾®å·®åˆ¥ã€ç´°ç¯€', example: 'B2 learners should understand the nuances of English grammar.' },
            { word: 'pragmatic', pronunciation: '/prÃ¦É¡ËˆmÃ¦tÉªk/', meaning: 'å¯¦ç”¨ä¸»ç¾©çš„ã€å¯¦éš›çš„', example: 'Take a pragmatic approach to language learning.' }
        ];

        const writingExercises = [
            {
                level: 1,
                question: 'Combine: "She finished her homework. She went to play." Answer should use a conjunction.',
                hint: 'Use "after" or "before"',
                goodAnswer: ['After she finished her homework, she went to play.', 'Once she completed her homework, she went to play.'],
                feedback: 'Great! You successfully combined two simple sentences using a conjunction. This shows B2-level sentence structure.'
            },
            {
                level: 2,
                topic: 'My favorite hobby',
                keywords: 'enjoy, practice, improve, passion',
                instruction: 'Write 3-5 sentences about your favorite hobby',
                feedback: 'Good paragraph structure! Make sure each sentence contributes to the main idea.'
            },
            {
                level: 3,
                topic: 'The importance of learning English in the digital age',
                instruction: 'Write 150-200 words about how English helps in modern world',
                feedback: 'Excellent! Your essay demonstrates B2-level coherence and complexity.'
            }
        ];

        // åˆå§‹åŒ–
        function initApp() {
            loadSchedule();
            loadVocabulary();
            loadWritingExercises();
            updateStats();
            addWordCounter();
        }

        function loadSchedule() {
            const container = document.getElementById('scheduleContent');
            container.innerHTML = scheduleData.map(item => `
                <div class="schedule-day">
                    <h4>${item.day}: ${item.theme}</h4>
                    <p><strong>å­¸ç¿’é‡é»ï¼š</strong> ${item.focus}</p>
                    <p><strong>æ ¸å¿ƒè©å½™ï¼š</strong> ${item.keywords}</p>
                </div>
            `).join('');
        }

        function loadVocabulary() {
            const container = document.getElementById('vocabularyList');
            container.innerHTML = vocabularyData.map((item, index) => `
                <div class="vocabulary-card">
                    <div class="word">
                        ${item.word}
                        <button class="play-btn" onclick="pronounceWord(${index})" title="æ’­æ”¾ç™¼éŸ³">ğŸ”Š</button>
                    </div>
                    <div class="pronunciation">${item.pronunciation}</div>
                    <div class="meaning">ğŸ’¡ ${item.meaning}</div>
                    <div class="example">ä¾‹å¥ï¼š${item.example}</div>
                </div>
            `).join('');
        }

        function loadWritingExercises() {
            // Level 1
            document.getElementById('ex1Question').textContent = writingExercises[0].question;
            document.getElementById('ex1Hint').textContent = writingExercises[0].hint;

            // Level 2
            document.getElementById('ex2Topic').textContent = writingExercises[1].topic;
            document.getElementById('ex2Keywords').textContent = writingExercises[1].keywords;

            // Level 3
            document.getElementById('ex3Topic').textContent = writingExercises[2].topic;
        }

        function switchWritingTab(index) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            tabs[index].classList.add('active');
            contents[index].classList.add('active');
        }

        function checkLevel1() {
            const answer = document.getElementById('answer1').value.trim();
            const feedback = document.getElementById('feedback1');
            
            if (!answer) {
                feedback.innerHTML = '<div class="feedback error">âŒ è«‹è¼¸å…¥ç­”æ¡ˆ</div>';
                return;
            }

            const hasConnector = ['after', 'before', 'when', 'because', 'although', 'while', 'since'].some(word => answer.toLowerCase().includes(word));
            
            if (hasConnector && answer.length > 30) {
                feedback.innerHTML = `<div class="feedback success">âœ… å¾ˆå¥½ï¼ä½ æˆåŠŸçµ„åˆäº†å¥å­ã€‚é€™æ˜¯B2ç´šåˆ¥çš„å¥å­çµæ§‹ã€‚</div>`;
                incrementStats('wordCount');
                incrementStats('writingCount');
            } else {
                feedback.innerHTML = `<div class="feedback info">ğŸ’¡ è©¦è‘—ä½¿ç”¨é€£æ¥è©(because, after, when, althoughç­‰)ä¾†çµ„åˆå¥å­ã€‚</div>`;
            }
        }

        function checkLevel2() {
            const answer = document.getElementById('answer2').value.trim();
            const feedback = document.getElementById('feedback2');
            const sentences = answer.split('.').filter(s => s.trim());
            
            if (!answer) {
                feedback.innerHTML = '<div class="feedback error">âŒ è«‹è¼¸å…¥ç­”æ¡ˆ</div>';
                return;
            }

            if (sentences.length >= 3 && sentences.length <= 6 && answer.length > 60) {
                feedback.innerHTML = `<div class="feedback success">âœ… å„ªç§€ï¼ä½ å¯«å‡ºäº†ä¸€å€‹çµæ§‹è‰¯å¥½çš„æ®µè½ã€‚åŒ…å«ä¸»é¡Œå¥å’Œæ”¯æŒå¥ã€‚</div>`;
                incrementStats('writingCount');
            } else {
                feedback.innerHTML = `<div class="feedback info">ğŸ’¡ ä¸€å€‹å¥½æ®µè½æ‡‰è©²æœ‰3-5å€‹å¥å­ï¼Œä¸¦ä¸”åœç¹ä¸€å€‹ä¸»é¡Œå±•é–‹ã€‚</div>`;
            }
        }

        function checkLevel3() {
            const answer = document.getElementById('answer3').value.trim();
            const feedback = document.getElementById('feedback3');
            const words = answer.split(/\s+/).length;
            
            if (!answer) {
                feedback.innerHTML = '<div class="feedback error">âŒ è«‹è¼¸å…¥ç­”æ¡ˆ</div>';
                return;
            }

            if (words >= 150 && words <= 200) {
                feedback.innerHTML = `<div class="feedback success">âœ… å®Œç¾ï¼ä½ å¯«å‡ºäº†ä¸€ç¯‡${words}å­—çš„çŸ­æ–‡ï¼Œç¬¦åˆB2ç´šåˆ¥è¦æ±‚ã€‚</div>`;
                incrementStats('writingCount');
            } else if (words > 100) {
                feedback.innerHTML = `<div class="feedback info">ğŸ’¡ ä½ çš„çŸ­æ–‡æœ‰${words}å­—ã€‚B2ç´šåˆ¥ç›®æ¨™æ˜¯150-200å­—ã€‚è©¦è‘—åŠ å…¥æ›´å¤šç´°ç¯€å’Œä¾‹å­ã€‚</div>`;
            } else {
                feedback.innerHTML = `<div class="feedback info">ğŸ’¡ ä½ çš„çŸ­æ–‡åªæœ‰${words}å­—ã€‚è«‹è£œå……åˆ°150-200å­—ã€‚</div>`;
            }
        }

        function addWordCounter() {
            const textarea = document.getElementById('answer3');
            textarea.addEventListener('input', () => {
                const words = textarea.value.split(/\s+/).filter(w => w.length > 0).length;
                document.getElementById('wordCounter').textContent = words;
            });
        }

        function pronounceWord(index) {
            const item = vocabularyData[index];
            const utterance = new SpeechSynthesisUtterance(item.word);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;
            utterance.pitch = 1;
            
            const btn = event.target;
            btn.classList.add('playing');
            
            utterance.onend = () => {
                btn.classList.remove('playing');
            };
            
            speechSynthesis.cancel();
            speechSynthesis.speak(utterance);
        }

        function updateStats() {
            const saved = localStorage.getItem('englishStats');
            if (saved) {
                const stats = JSON.parse(saved);
                document.getElementById('dayCount').textContent = stats.dayCount || 0;
                document.getElementById('wordCount').textContent = stats.wordCount || 0;
                document.getElementById('writingCount').textContent = stats.writingCount || 0;
                document.getElementById('streak').textContent = stats.streak || 0;
            } else {
                document.getElementById('dayCount').textContent = 0;
                document.getElementById('wordCount').textContent = 0;
                document.getElementById('writingCount').textContent = 0;
                document.getElementById('streak').textContent = 0;
            }
        }

        function incrementStats(key) {
            let stats = {};
            const saved = localStorage.getItem('englishStats');
            
            if (saved) {
                stats = JSON.parse(saved);
            }
            
            stats[key] = (stats[key] || 0) + 1;
            localStorage.setItem('englishStats', JSON.stringify(stats));
            updateStats();
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
